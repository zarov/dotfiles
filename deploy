#!/bin/sh

CWD=$(pwd)

red="\033[31m"
green="\033[32m"
yellow="\033[33m"
blue="\033[34m"
reset="\033[0m"

create_directory() {
    if [ ! -d "$1" ]; then
        mkdir -p $1
        echo " ${yellow}${1}${reset} % has been created"
    else
        echo " ${yellow}${1}${reset} % already exists"
    fi
}

link_file() {
    if ! which "$1" >/dev/null; then
        echo " ${yellow}${1}${reset} % ${red}is not available${reset}"
    elif [ -e "$2" ]; then
        if [ -L "$2" ]; then
            echo " ${yellow}${2}${reset} % ${blue}is already symlinked${reset}"
        else
            echo " ${yellow}${2}${reset} % ${red}is no symlink${reset}"
        fi
    else
        ln -s "$3" "$2"
        echo " ${yellow}${2}${reset} % ${green}-> ${3}${reset}"
    fi
}

# create all necessary directory
{
    create_directory    ~/.config/nvim
    create_directory    ~/.nvm
    create_directory    ~/Workspace
} | column -t -s %

# link all necessary things
{
    link_file     git        ~/.gitconfig               $CWD/git/gitconfig
    link_file     git        ~/.gitignore_global        $CWD/git/gitignore_global
    link_file     nvim       ~/.config/nvim/init.vim    $CWD/vimrc
    link_file     tmux       ~/.tmux.conf               $CWD/tmux.conf
    link_file     zsh        ~/.zshrc                   $CWD/zshrc
} | column -t -s %
